# CLI Interface Contract: claude-docs (Foundation Phase)

**Version**: 1.0.0 (Foundation)
**Date**: 2025-11-20
**Status**: Phase 1 - Basic Commands Only

This document defines the command-line interface for the claude-docs CLI tool. In the foundation phase, only `--version` and `--help` commands are implemented. Future phases will add business logic commands.

---

## Global Options

These options are available for all commands:

| Flag | Description | Default |
|------|-------------|---------|
| `--version`, `-v` | Display version information | N/A |
| `--help`, `-h` | Display help information | N/A |

---

## Commands (Foundation Phase)

### `--version` / `-v`

**Description**: Display the current version of claude-docs CLI.

**Usage**:
```bash
claude-docs --version
claude-docs -v
```

**Output**:
```
1.0.0
```

**Exit Code**: 0

**Implementation Notes**:
- Version is read from package.json
- Output format is plain semantic version string
- No additional text or branding (enables scripting)

---

### `--help` / `-h`

**Description**: Display comprehensive help text with all available commands and options.

**Usage**:
```bash
claude-docs --help
claude-docs -h
```

**Output Format**:
```
Usage: claude-docs [options] [command]

Claude Code Documentation Manager - Node.js CLI

Options:
  -v, --version                Display version information
  -h, --help                   Display help information

Commands:
  help [command]               Display help for command

This is the foundation phase. Additional commands (update, get, list, search, cache)
will be added in future phases.

For more information, visit: https://github.com/[org]/claude-docs-cli
```

**Exit Code**: 0

**Implementation Notes**:
- Help text is auto-generated by Commander.js
- Command descriptions are extracted from `.description()` calls
- Future commands will be automatically included when registered

---

### `help [command]`

**Description**: Display detailed help for a specific command.

**Usage**:
```bash
claude-docs help
claude-docs help --version
```

**Output**: Contextual help for the specified command.

**Exit Code**: 0

**Implementation Notes**:
- Built into Commander.js automatically
- Shows usage, description, and all options for the command

---

## Future Commands (Not Implemented in Foundation Phase)

The following commands are documented in the bash script and will be implemented in subsequent phases:

### `update [check|commit|discard|status]`
Documentation update management (Phase 3)

### `get <slug> [--no-cache]`
Retrieve documentation with transformations (Phase 3)

### `list [slug] [--no-cache]`
List available documentation or show structure (Phase 3)

### `search <query>`
Search across documentation (Phase 4)

### `cache [clear|info|warm]`
Cache management (Phase 4)

---

## Error Handling

### Unknown Command

**Trigger**: User runs a command that doesn't exist

**Example**:
```bash
claude-docs unknown-command
```

**Output**:
```
error: unknown command 'unknown-command'

(Did you mean one of these?)
    --version
    --help

Run 'claude-docs --help' for available commands
```

**Exit Code**: 1

### Missing Required Argument

**Trigger**: User runs a command missing required arguments (future phases)

**Example** (future):
```bash
claude-docs get
```

**Output**:
```
error: missing required argument 'slug'

Usage: claude-docs get <slug> [options]

Run 'claude-docs help get' for more information
```

**Exit Code**: 1

### Invalid Option

**Trigger**: User provides an invalid option

**Example**:
```bash
claude-docs --unknown-flag
```

**Output**:
```
error: unknown option '--unknown-flag'

Run 'claude-docs --help' to see available options
```

**Exit Code**: 1

---

## Exit Codes

| Code | Meaning |
|------|---------|
| 0 | Success |
| 1 | General error (invalid command, missing argument, etc.) |
| 2 | Misuse of command (future: validation errors) |

---

## Performance Requirements

| Operation | Target |
|-----------|--------|
| `--version` | <50ms |
| `--help` | <50ms |
| Cold start (first run) | <100ms |
| Subsequent runs | <50ms |

---

## Compatibility

- **Node.js**: 22.x LTS minimum
- **Platforms**: Linux, macOS, Windows
- **Terminal**: Any ANSI-compatible terminal (colors auto-detected)

---

## Testing Contract

Each command MUST have:
1. **Unit test**: Verify command registration and basic execution
2. **Integration test**: Verify end-to-end command execution via CLI
3. **Help text test**: Verify help output contains required information
4. **Error test**: Verify error handling for invalid usage

Example test structure:
```typescript
describe('--version command', () => {
  it('should display version number', async () => {
    const result = await execCLI(['--version']);
    expect(result.stdout).toMatch(/^\d+\.\d+\.\d+$/);
    expect(result.exitCode).toBe(0);
  });

  it('should complete in under 50ms', async () => {
    const start = Date.now();
    await execCLI(['--version']);
    const duration = Date.now() - start;
    expect(duration).toBeLessThan(50);
  });
});
```

---

## Change Log

### v1.0.0 (Foundation)
- Added `--version` command
- Added `--help` command
- Defined error handling contract
- Documented future command structure

---

## Notes

**Foundation Scope**:
- This contract documents ONLY the commands implemented in the foundation phase
- Business logic commands (update, get, list, search, cache) are documented as future work
- The interface is designed to be extended without breaking changes

**Design Principles**:
- Follow POSIX CLI conventions (double-dash for long options, single-dash for short)
- Provide helpful error messages with suggestions
- Auto-generate help text (don't maintain manually)
- Optimize for startup time (<100ms)

**References**:
- Based on bash script analysis (claude-docs.sh)
- Follows Commander.js conventions
- Aligned with constitution performance requirements
